<% content_for(:title, "New Contribution â€” Investments Portfolio") %>

<div class="mb-4">
  <%= link_to "&larr; Back to Dashboard".html_safe, root_path, class: "text-indigo-600 hover:text-indigo-800 text-sm" %>
</div>

<h1 class="text-2xl font-bold text-gray-800 mb-6">Record Contribution</h1>

<div class="bg-white rounded-xl shadow p-6 max-w-lg">
  <%= form_with model: @contribution, local: true do |f| %>
    <% if @contribution.errors.any? %>
      <div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm mb-4">
        <ul>
          <% @contribution.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="mb-4">
      <%= f.label :policy_id, "Policy", class: "block text-sm font-medium text-gray-700 mb-1" %>
      <%= f.collection_select :policy_id, @policies, :id, :name, { prompt: "Select a policy" },
          class: "w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-indigo-500 focus:border-indigo-500" %>
    </div>

    <div class="mb-4">
      <%= f.label :contribution_date, "Date", class: "block text-sm font-medium text-gray-700 mb-1" %>
      <%= f.date_field :contribution_date, value: Date.current.beginning_of_month,
          class: "w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-indigo-500 focus:border-indigo-500" %>
    </div>

    <div class="mb-6">
      <%= f.label :amount, "Amount (\u20AC)", class: "block text-sm font-medium text-gray-700 mb-1" %>
      <%= f.number_field :amount, step: 0.01, min: 0,
          class: "w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-indigo-500 focus:border-indigo-500" %>
    </div>

    <div class="flex justify-end">
      <%= f.submit "Record Contribution", class: "bg-indigo-600 text-white px-6 py-2 rounded-lg text-sm font-medium hover:bg-indigo-700 cursor-pointer" %>
    </div>
  <% end %>
</div>
